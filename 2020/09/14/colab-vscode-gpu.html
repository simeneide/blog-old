<p>+++
date = 2020-09-14
title = “Running Google Colab with VS code”
active = true
tags = [“foo”]
+++</p>

<p>Running VScode and the python extension is great for development.
I get clean python files <em>and</em> can run my code interactively.
It is the same setup we have at work and I then remotely connect to a server with more cpu and GPU.
However, for my side gigs I havent really figured out a workflow, until now.</p>

<p>This morning I found <a href="https://github.com/WassimBenzarti/colab-ssh">colab-ssh</a>. It enables you to <strong>remotely connect your google colab instance to your local VScode</strong>! 
And if you have a GPU runtime on google colab you get that as well, of course. 
Combining this with a small google drive mounting, and I <strong>get more or less my local working environment but with GPU acceleration</strong>.</p>

<p><img src="/blog/assets_old/2020-09-14-12-29-52.png" alt="" /></p>

<p>A quick step-by-step (see <a href="https://github.com/WassimBenzarti/colab-ssh">colab-ssh</a> for updates if this doesnt work):</p>
<ol>
  <li>Open a new google colab notebook.</li>
  <li>In first cell: Mount your google drive using these commands (you need to follow link and authorize):
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>from google.colab import drive
drive.mount('/root/gdrive')
</code></pre></div>    </div>
  </li>
  <li>Go to <a href="https://dashboard.ngrok.com/auth/your-authtoken">this site</a> and get an ngrok token.</li>
  <li>Second cell: Add your token and create a password. Then add+run this:</li>
</ol>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># Install colab_ssh on google colab
!pip install colab_ssh --upgrade
ngrokToken = 'XXX'
password = 'XXX'
from colab_ssh import launch_ssh, init_git
launch_ssh(ngrokToken,password)
</code></pre></div></div>
<ol>
  <li>You’ll now see something like this:</li>
</ol>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Collecting colab_ssh
  Downloading https://files.pythonhosted.org/packages/a7/c5/eedfd8b374fead9d863cb7031d9dc97fed50003372922ba0efd85d9fe3e0/colab_ssh-0.2.63-py3-none-any.whl
Installing collected packages: colab-ssh
Successfully installed colab-ssh-0.2.63
Successfully running 2.tcp.ngrok.io:13254
[Optional] You can also connect with VSCode SSH Remote extension using this configuration:

	Host google_colab_ssh
		HostName 2.tcp.ngrok.io
		User root
		Port 12345
</code></pre></div></div>

<ol>
  <li>Go to your local VScode and select Remote-SSH: Open Configuration File, and paste the config above:</li>
</ol>

<p><img src="/blog/assets_old/2020-09-14-12-36-15.png" alt="" /></p>

<p><img src="/blog/assets_old/2020-09-14-12-37-44.png" alt="" /></p>

<ol>
  <li>Select Remote-SSH: Connect to Host and select the google colab ssh connection.</li>
</ol>

<p><img src="/blog/assets_old/2020-09-14-12-38-18.png" alt="" /></p>

<p>Voila! Up and running with gpu and your google drive attached.</p>

<p>Unfortunately, the hostname and port changes each time, and you still have to manually open the google colab.</p>

<p>Still, really great work by Wassim Benzarti.</p>
